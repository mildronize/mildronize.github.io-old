{"componentChunkName":"component---src-templates-post-jsx","path":"/dealing-with-more-than-100-secrets-on-git-hub-actions-using-mozilla-sops-and-azure-key-vault-suzlta6/","result":{"data":{"markdownRemark":{"html":"<h2>Talks Info</h2>\n<ul>\n<li>Event: Global Azure Thailand.</li>\n<li><a href=\"https://github.com/mildronize/100-secrets-github-actions-sops-with-azure-key-vault\">Demo Repo in Talk</a></li>\n<li><a href=\"https://github.com/mildronize/sops-with-azure-keyvault-secrets\">SOPS for Azure Key Vault Boilerplate on GitHub</a></li>\n</ul>\n<hr>\n<p>ก่อนที่จะอ่านบทความนี้ควรที่จะเข้าใจการใช้งาน GitHub Actions เบื้องต้นก่อน</p>\n<h1>1. Introduction</h1>\n<p>เชื่อว่าหลายๆ คนมีการอัพโหลด secret ไปที่ GitHub Secrets เพื่อที่จะ deploy ไปที่ server</p>\n<p>แต่ประเด็นคือ ใน 1 GitHub Action repo เราใช้ secret ของ GitHub Action ได้ไม่เกิน 100 ตัว เพื่อแก้ปัญหาดังกล่าว เราเลยมีทางออกประมาณ 3 วิธี</p>\n<h2>Possible Solution</h2>\n<ol>\n<li>ย้ายไปสร้างที่ Organization แทน มันใส่ได้ 1,000 ตัว เพราะว่า secret จะไปเห็นที่ repo อื่นๆ ด้วย จึงไม่ผ่านเรื่อง security</li>\n<li>สร้าง Service Principal ของแต่ละ resource group แล้ว ตอน deploy ให้ไป download publish profile ทุกครั้ง แทน เพื่อลดจำนวน secrets แต่วิธีการนี้ ก็ปัญหาเรื่อง security เช่นกัน เพราะ เรามี secret  ที่มีสิทธิสูงเกินความจำเป็น ถ้าใช้หลักการของ zero trust เราควรทำให้ secret มีสิทธิ์เพียงแค่เท่าที่ใช้งานเท่านั้น (Principle of least privilege)</li>\n<li>เราจะเก็บ Decryption Key ใน Github secrets โดยแยกแต่ละ Environment หรือ group ที่เรากำหนดไว้ เวลาจะใช้ ก็ decrypt ออกมา ซึ่งไฟล์ encrypted secrets อยู่ใน Private Repo แทน อ่านเพิ่ม <a href=\"https://docs.github.com/en/actions/security-guides/encrypted-secrets#limits-for-secrets\">https://docs.github.com/en/actions/security-guides/encrypted-secrets#limits-for-secrets</a></li>\n</ol>\n<p><a href=\"https://github.com/mozilla/sops\">https://github.com/mozilla/sops</a></p>\n<h2>Our Solution</h2>\n<p>เราเลือกที่จะไปทางข้อ Solution ข้อที่ 3 โดยเราเลือกใช้ <a href=\"https://github.com/mozilla/sops\">Mozilla SOPS</a> ซึ่งเป็น Tools ที่เป็นที่นิยมมากๆ ในการจัดการ secrets โดยใช้วิธีการ symmetric encyption ไฟล์ Yaml เพื่อจะ encrypt secrets ต่างๆ โดย SOPS support การ Encrypt จาก Cloud ไม่ว่าจะเป็น Azure, AWS, หรือ GCP รวมถึง <a href=\"https://www.vaultproject.io/\">HashiCorp Vault</a> ด้วย และยังสามารถใช้ Local Encrypt จาก <a href=\"https://github.com/FiloSottile/age\">Age</a> และ <a href=\"https://www.openpgp.org/\">PGP</a> ได้อีกด้วย</p>\n<h3>สาเหตุที่เลือกใช้ SOPS</h3>\n<p>มีการพูดถึง SOPS ใน <a href=\"https://www.cncf.io/\">Cloud Native Computing Foundation (CNCF)</a> เกี่ยวกับการจัดการ Secrets <a href=\"https://www.cncf.io/blog/2021/04/22/revealing-the-secrets-of-kubernetes-secrets/\">สำหรับ Kubernates</a> และอยู่ใน <a href=\"https://radar.cncf.io/2021-02-secrets-management\">CNCF Radar 2021 ระดับ Assess</a> และอยู่ใน <a href=\"https://www.thoughtworks.com/en-th/radar/tools/mozilla-sops\">thoughtworks Technology Radar 2021 ระดับ Assess</a> เครื่องมือ <a href=\"https://fluxcd.io/docs/guides/mozilla-sops/\">Flux CD ก็เขียนคู่มือการใช้งาน SOPS ไว้</a></p>\n<p>แต่ SOPS เองก็มีประเด็นต้องพิจารณาเพิ่มเติมด้วย</p>\n<ol>\n<li>เราจะเก็บ Cipher text (Encrypted data) ไว้ที่ไหนถึงจะปลอดภัย</li>\n<li>เรื่องของ Key Rotation อาจจะต้องการจัดเอง</li>\n</ol>\n<p>เราไม่สามารถเก็บ secrets ทั้งหมดได้ใน github Secrets เพราะจากจำนวน secrets ที่เยอะ จึงไม่สามารถเก็บใน 1 Github Secrets ที่มีขนาดไม่เกิน 64 KB</p>\n<blockquote>\n<p>Secrets are limited to 64 KB in size. To use secrets that are larger than 64 KB, you can store encrypted secrets in your repository and save the decryption passphrase as a secret on GitHub. อ่านเพิ่ม <a href=\"https://docs.github.com/en/actions/security-guides/encrypted-secrets#limits-for-secrets\">https://docs.github.com/en/actions/security-guides/encrypted-secrets#limits-for-secrets</a></p>\n</blockquote>\n<p>ดังนั้น ถ้าเราเก็บ SOPS Encrypted Secrets ตรงๆ ใน GitHub Secrets ไม่ได้เนื่องจากขนาดเกิน การเก็บ Encrypted Secrets ใน Git Repo ก็ทางเลือกหนึ่งที่พอรับได้ แต่สิ่งที่ต้องเผชิญต่อไปคือ Internal Threat</p>\n<h2>ทางเลือกอื่นๆ เพื่อปิดช่องโหว่เรื่อง Internal Treat</h2>\n<p>ถ้าการใช้ SOPS อาจจะยังไม่ตอบโจทย์เรื่องความปลอดภัยเพียงพอ เราอาจจะต้องใช้ External Secret Management Tool เช่น <a href=\"https://www.vaultproject.io/\">HashiCorp Vault</a></p>\n<p>แต่สิ่งที่พิจารณาเพิ่มเติมคือ เรื่อง External Threat แทนที่จะเป็นเรื่องของ Internal Threat เวลาใช้ SOPS เก็บ secrets ใน Git Repo</p>\n<p>ดังนั้น การที่ทำให้อุดช่องโหว่เรื่อง External Threat คือการทำ Private Connection ระหว่าง HashiCorp Vault Server และ GitHub Action Runner แทน ซึ่งเราจะต้อง Setup Self-Host GitHub Action Runner ขึ้นมาเอง และตั้งค่าให้อยู่ภายใน Private Network เดียวกันกับ HashiCorp Vault Server ดูตัวอย่างได้ใน <strong><a href=\"https://www.youtube.com/watch?v=rhB72KFiL48\">Secure GitOps Workflows with GitHub Actions and HashiCorp Vault</a></strong></p>\n<p>ถ้าเราจะเชื่อมต่อ HashiCorp ******Cloud Platform (HCP) กับ Cloud AWS แบบ Private connection เราสามารถใช้ <a href=\"https://learn.hashicorp.com/tutorials/cloud/amazon-peering-hcp?in=vault/cloud-ops\">AWS VPC</a></p>\n<p>แต่สำหรับ Azure เองยังไม่ support HCP เราอาจจะต้องตั้งค่า deploy vault server เอง</p>\n<h2>Our Final Decision</h2>\n<p>เนื่องจากข้อจำกัดทางด้านเวลา และทรัพยากรที่เรามี เราจึงเลือกที่เก็บ SOPS encrypted secrets ใน Git Repo แทน จึงทำให้เราต้องมาพิจารณาเรื่อง internal threat แทน และขอไม่รับ External Threat มาเพิ่ม</p>\n<h1>2. การใช้งาน SOPS ด้วย Age Encryption</h1>\n<p><a href=\"https://github.com/mozilla/sops#22encrypting-using-age\">ใน Docs ของ SOPS ไม่แนะนำให้ใช้ PGP แล้ว ให้เปลี่ยนมาใช้ Age Encryption แทน</a> โดย Age Encryption ใช้เป็น X25519 is an elliptic curve <a href=\"https://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange\">Diffie-Hellman key exchange</a> using <a href=\"https://en.wikipedia.org/wiki/Curve25519\">Curve25519</a>.</p>\n<p>Install age via brew</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew <span class=\"token function\">install</span> age</code></pre></div>\n<p>Generate Age Key</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">age-keygen -o key.txt</code></pre></div>\n<p>The contain in file <code class=\"language-text\">key.txt</code> :</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># created: 2022-04-11T15:36:32+07:00</span>\n<span class=\"token comment\"># public key: age1js5yl37ghup68pzf8f2kutf6xtuwc4m6lpha0llgmcup93q3sp9qtfwvr8</span>\nAGE-SECRET-KEY-15YXVYTPWNT4UF3KY05K27LZN2SAT83SJKX7UH4MXQEQAWRWPFNYSDHK860</code></pre></div>\n<p><strong>DO NOT PUBLISH AGE SECRET KEY</strong> (This is for example in this repo only)</p>\n<p>Encrypt</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">sops --encrypt --age age1js5yl37ghup68pzf8f2kutf6xtuwc4m6lpha0llgmcup93q3sp9qtfwvr8 examples/data.yaml <span class=\"token operator\">></span> examples/data.age-enc.yaml</code></pre></div>\n<p>เราก็ได้ไฟล์ <code class=\"language-text\">data.age-enc.yaml</code>  ที่ถูกเข้ารหัสแล้ว เราก็นำไฟล์นี้ Commit ขึ้น Git Repo ได้เลย</p>\n<p>อันนี้เป็นตัวอย่างไฟล์ SOPS ที่ถูก Encrypt แล้ว</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fa5d9f74498fdd69e6591aee47d656a9/d9ed5/Screen_Shot_2565-04-14_at_13.24.48.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACEklEQVQoz42Qy2oUQRSG51l8BZeaiRl7lAFx6Qv4CIJEzUaMeQr3QQyJC0ExDyFoorkNMQmZW6Z7uqu669pVn8xEI4lZeODnQNWpj69Oo9lskmUpKh2h8hQjc7ScnHeRE0xFtIpgNVorxGiAzlO0LGb35SRFTDIKISiKgsbdJEEISZikFMenjE4k42FNNnKUhUdLRyU8XpR45/CDUwZ7h+z/FBycKHo9Sawk0zo7O6ORtNuUQkBVMB469r479n84jrqO/omjSB1KemwhCd5B7fHGUilHVTm0ssTaz4BpmtJoJwmFLPFFjjjtoYSi1g4/HbQW6j/xxBiJ/FvT8wtgMgWWFaWUDA52EWWG9QbjNPoiBj3dYwgXgKv5a9huI8sKZUqGg4reYckkqxEiImUkzwP5BNJMUYf6ktG1hq1Wi1yWMyNZKAa9miyD8ZhZt/Z82Hnzf8D5ZhMxM1QYa+h24dtWZHcv0u1G+v2IUpALTV3XTN+GK98NlwzvdRClQtsKYyx7u7C9BcdHMBrBoA/DAQyHhhA811X8vdvxeExj4eEjclNTWUWpNTv7kS9fA9s7gcOjQG8YmIhIoTQ+gq0DUhlKbZHa4EJkips6VsbSuPH4Da3lTZLlT9x//YG5Z+vcfLJGsrTB7cV15hbXSV5sMP/8HZ1X71lYWuPW01XmFldpL73lwcpHOiubdFY+c+flJr8ApXkiLVXXRU0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Screen Shot 2565-04-14 at 13.24.48.png\"\n        title=\"Screen Shot 2565-04-14 at 13.24.48.png\"\n        src=\"/static/fa5d9f74498fdd69e6591aee47d656a9/8c557/Screen_Shot_2565-04-14_at_13.24.48.png\"\n        srcset=\"/static/fa5d9f74498fdd69e6591aee47d656a9/4edbd/Screen_Shot_2565-04-14_at_13.24.48.png 175w,\n/static/fa5d9f74498fdd69e6591aee47d656a9/13ae7/Screen_Shot_2565-04-14_at_13.24.48.png 350w,\n/static/fa5d9f74498fdd69e6591aee47d656a9/8c557/Screen_Shot_2565-04-14_at_13.24.48.png 700w,\n/static/fa5d9f74498fdd69e6591aee47d656a9/e996b/Screen_Shot_2565-04-14_at_13.24.48.png 1050w,\n/static/fa5d9f74498fdd69e6591aee47d656a9/2cefc/Screen_Shot_2565-04-14_at_13.24.48.png 1400w,\n/static/fa5d9f74498fdd69e6591aee47d656a9/d9ed5/Screen_Shot_2565-04-14_at_13.24.48.png 2880w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>หลังจากนั้น ตั้งค่า GitHub Secret ด้วย Age Secret key</p>\n<p>ตัวอย่างการใช้งาน</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v3\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> mildronize/actions<span class=\"token punctuation\">-</span>get<span class=\"token punctuation\">-</span>secret<span class=\"token punctuation\">-</span>sops@v1\n    <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> sops\n    <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"examples/data.age-enc.yaml\"</span> <span class=\"token comment\"># Encrypted SOPS yaml path</span>\n      <span class=\"token key atrule\">property-path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\".scope_a.app_service.app1\"</span> <span class=\"token comment\"># yq/jq expression syntax for getting a particular value</span>\n      <span class=\"token key atrule\">decrypting-key</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.Age_SOPS_github_action <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token comment\"># Age Secret Key</span>\n      <span class=\"token key atrule\">sops-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3.7.2'</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> echo \"$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> steps.sops.outputs.secret <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\"</code></pre></div>\n<blockquote>\n<p>ในการใช้งาน <a href=\"https://github.com/marketplace/actions/get-secrets-from-encrypted-sops\">mildronize/actions-get-secret-sops</a> จะต้องกำหนด <code class=\"language-text\">property-path</code> สำหรับเข้าถึง secret ที่เราต้องการผ่าน path ของ yaml ไฟล์ โดยใช้ syntax ของ <a href=\"https://stedolan.github.io/jq/\">jq</a> หรือ <a href=\"https://github.com/mikefarah/yq\">yq</a> ก็ได้</p>\n</blockquote>\n<p>การ Decrypt ให้เราใช้ Age Secret key ตั้งค่าไว้ใน environment variable ชื่อ <code class=\"language-text\">SOPS_AGE_KEY</code></p>\n<p>โดยใช้</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">sops <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>decrypt examples/data.age<span class=\"token punctuation\">-</span>enc.yaml <span class=\"token punctuation\">></span> examples/data.yaml</code></pre></div>\n<p>แต่ปัญหาก็คือใครเป็นคนเก็บ Age Secret Key และการแจกจ่าย key ให้คนอื่นใช้โดยไม่รู้ว่าใครเป็นคนใช้งาน ถือว่าเป็นปัญหาหนึ่งของ security ในรูปเป็นตัวอย่างในการใช้ Age Encryption โดยเก็บ  Age Secret Key ไว้ใน 1password</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1e2a8e06bf32438292d33f174d7be01e/599ea/Untitled.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABPUlEQVQY022Ry07DMBBF8+n8A1/AlhUSO5ZtRbsAUbVCSCiQVG0eTRzbY8fjPOwxSssCqp7lSHceZ6LwByLyRCGE0fmn5ZZD6zx1/TA6H64RXRZOYcerbLP++PxaLlchhNaYzlpEHMfxX9igBd1K1eoWu67jdV1qxPvbcHcTp7v5fOacA6XTNI3jWGuNtm8ECNBou6gRcCgZh1aCYozleS4AyCLWpTJGSsm5GJ07H8UY22dFLaZBaG3EJdRc1FwwLgBASomIRNOpjVBSGQm673tENMZwzhsutDG6baVSkfO+KKusOBIFAPhOkqrIXpPm4WX/tt4unlesASkhSZI0TZVSRGF3yPJj5b2fhI2jc6fFJlWTWNrs4XFdbLbvs9mCC9X3g/feOUdnnRP+0jad+O0yDNZ2xlhjrPd09VU/f3rHCzqXuCsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/1e2a8e06bf32438292d33f174d7be01e/8c557/Untitled.png\"\n        srcset=\"/static/1e2a8e06bf32438292d33f174d7be01e/4edbd/Untitled.png 175w,\n/static/1e2a8e06bf32438292d33f174d7be01e/13ae7/Untitled.png 350w,\n/static/1e2a8e06bf32438292d33f174d7be01e/8c557/Untitled.png 700w,\n/static/1e2a8e06bf32438292d33f174d7be01e/e996b/Untitled.png 1050w,\n/static/1e2a8e06bf32438292d33f174d7be01e/2cefc/Untitled.png 1400w,\n/static/1e2a8e06bf32438292d33f174d7be01e/599ea/Untitled.png 1926w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><a href=\"https://blog.thenets.org/how-to-commit-encrypted-files-to-git-with-mozilla-sops/\">https://blog.thenets.org/how-to-commit-encrypted-files-to-git-with-mozilla-sops/</a></p>\n<p>แต่ก็กลับมาประเด็นเดิมคือ การแจกจ่าย Key (Key Distribution) ให้คนอื่นใช้โดยไม่รู้ว่าใครเป็นคนใช้งาน อาจจะเกิดปัญหาเรื่อง Key หลุดแล้ว Track ไม่ได้ว่าเกิดอะไร ดังนั้นการใช้ 3rd Party Secret Management ช่วย ก็จะเป็นทางออกที่ดี ในที่นี้ผมจะใช้ Azure Key Vault เพราะแทนที่เราจะเก็บตัว Private Key นั้นเอง เราให้ Azure Key Vault ช่วยเก็บให้ และการเอาออกมาใช้ ด้วยสิทธิ์ของ User ที่อยู่ใน Azure แทน แบบนี้เราก็สามารถ track ได้ว่า user ที่มีสิทธิ์เท่านั้นนะ สามารถเข้าถึง key ได้ รวมถึงมีประวัติการใช้งาน key อีกด้วย</p>\n<h1>3. การใช้ SOPS ด้วย Azure Key Vault</h1>\n<p>ในการใช้ SOPS ด้วย Azure Key Vault ดูประกอบดังนี้</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/49bf7126f2c87435bc9279b868d9cc7b/ba13a/DevOps_-_Secrets_Management.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3paAf//EABcQAQADAAAAAAAAAAAAAAAAAAABEEH/2gAIAQEAAQUCam//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAXEAEAAwAAAAAAAAAAAAAAAAAQARFB/9oACAEBAAE/IbUNf//aAAwDAQACAAMAAAAQYM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAgIDAAAAAAAAAAAAAAABABEhMUFRYf/aAAgBAQABPxB5DR6R6uzMLIFWLSE1P//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DevOps - Secrets Management.jpg\"\n        title=\"DevOps - Secrets Management.jpg\"\n        src=\"/static/49bf7126f2c87435bc9279b868d9cc7b/29d31/DevOps_-_Secrets_Management.jpg\"\n        srcset=\"/static/49bf7126f2c87435bc9279b868d9cc7b/e52aa/DevOps_-_Secrets_Management.jpg 175w,\n/static/49bf7126f2c87435bc9279b868d9cc7b/70ebb/DevOps_-_Secrets_Management.jpg 350w,\n/static/49bf7126f2c87435bc9279b868d9cc7b/29d31/DevOps_-_Secrets_Management.jpg 700w,\n/static/49bf7126f2c87435bc9279b868d9cc7b/9ecec/DevOps_-_Secrets_Management.jpg 1050w,\n/static/49bf7126f2c87435bc9279b868d9cc7b/d165a/DevOps_-_Secrets_Management.jpg 1400w,\n/static/49bf7126f2c87435bc9279b868d9cc7b/ba13a/DevOps_-_Secrets_Management.jpg 2441w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>โดยเริ่มต้นสร้าง Azure Key Vault ก่อน และสร้าง Key สำหรับ SOPS แล้วก็สร้าง Service Principle สำหรับใช้ใน GitHub Actions</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">az login\n<span class=\"token comment\"># ตั้งค่า default subscription</span>\naz account <span class=\"token builtin class-name\">set</span> --subscription <span class=\"token string\">\"Your subscription Name\"</span>\n<span class=\"token comment\"># สร้าง Resource Group ถ้ายังไม่มี</span>\naz group create --name rg-common --location <span class=\"token string\">\"Central US\"</span>\n<span class=\"token comment\"># Create a Vault, a key, and give the service principal access:</span>\naz keyvault create --name <span class=\"token string\">\"kv-github-action\"</span> --resource-group rg-common --location <span class=\"token string\">\"Central US\"</span>\n\naz keyvault key create --name <span class=\"token string\">\"sops-key\"</span> --vault-name <span class=\"token string\">\"kv-github-action\"</span> --protection software --ops encrypt decrypt</code></pre></div>\n<p>จากนั้นสร้าง Service Principle สำหรับ Key Vault เพื่อให้มีสิทธิ์เท่าที่จำเป็น (Principle of least privilege)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">az ad sp create-for-rbac -n <span class=\"token string\">\"Display Name of Service Principle\"</span> --role Contributor --scopes /subscriptions/<span class=\"token punctuation\">[</span>Subscription ID<span class=\"token punctuation\">]</span>/resourceGroups/<span class=\"token punctuation\">[</span>resource_Group_name<span class=\"token punctuation\">]</span>/providers/Microsoft.KeyVault/vaults/<span class=\"token punctuation\">[</span>vault_name<span class=\"token punctuation\">]</span></code></pre></div>\n<p>เรื่อง Role Contributor อาจจะมีสิทธิสูงเกินไป อาจจะเลือก Role อื่นตามความเหมาะสม โดยผลลัพธ์จะออกมาหน้าตาประมาณนี้</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"appId\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"&lt;some-uuid>\"</span>,\n  <span class=\"token string\">\"displayName\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"my-keyvault-sp\"</span>,\n  <span class=\"token string\">\"name\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"http://my-keyvault-sp\"</span>,\n  <span class=\"token string\">\"password\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"&lt;some-uuid>\"</span>,\n  <span class=\"token string\">\"tenant\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"&lt;tenant-id>\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>จากนั้นตั้งค่า Environment Variable โดยเอา Value จากข้างบน และให้สิทธิ์ Key Vault ให้กับ Service Principle</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">AZURE_CLIENT_ID</span><span class=\"token operator\">=</span><span class=\"token string\">\"appId\"</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">AZURE_TENANT_ID</span><span class=\"token operator\">=</span><span class=\"token string\">\"tenant\"</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">AZURE_CLIENT_SECRET</span><span class=\"token operator\">=</span><span class=\"token string\">\"password\"</span>\n\naz keyvault set-policy --name <span class=\"token string\">\"kv-github-action\"</span> --resource-group <span class=\"token string\">\"rg-common\"</span> --spn <span class=\"token variable\">$AZURE_CLIENT_ID</span> --key-permissions encrypt decrypt</code></pre></div>\n<ol>\n<li>ต่อไปเราจะอ่าน Azure Key Vault ID มา จะเป็นหน้าตามประมาณนี้ <code class=\"language-text\">[https://sops.vault.azure.net/keys/sops-key/some-string](https://sops.vault.azure.net/keys/sops-key/some-string)</code> และใช้ในการ Encrypt SOPS</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Read the key id:</span>\naz keyvault key show --name <span class=\"token string\">\"sops-key\"</span> --vault-name <span class=\"token string\">\"kv-github-action\"</span> --query key.kid\n\n<span class=\"token comment\"># Encrypt</span>\nsops --encrypt --azure-kv https://sops.vault.azure.net/keys/sops-key/some-string examples/data.yaml <span class=\"token operator\">></span> examples/data.azure-enc.yaml</code></pre></div>\n<p>โดยจะมีหน้าตาประมาณนี้</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6bcab8592c3b374437bb3072aef1b041/d9ed5/Screen_Shot_2565-04-14_at_16.12.50.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACLUlEQVQoz2WSu24TQRiF/VwUgQhHSNAjUVNSIATiUoCQEM/AA1BAwUVUVAFR0IESGyexIYDBiffq3Z2Z3bnsevdD3jUBwS99OqeYOfMfaXobG6eJ44g88FChjxEJVqZYkbR+qRWNLVpqk+NURplLtNYYa1BpiokDdLbAiIze2X4fKSWNSJHzkGCm8b2GKKgJ/JrA6/DnNYuoJgqhiDXUFXGaUSqJ+PaDcCZwqaK3tbWFkIoqiZHHPnlSYIVucSvk2kuNyTQ201S5YbmsSLMMSkelVmcMdV7Q2+r3EXlBriTR9BCxiEkySyYtqVhhSDPdIpXGOY2rLKpQeL5HN80ausBEKHRpsTIj+zlnNnUcTS3HU8N8VpIkoHWDc38uLpclnj/v4pqGpum0rSzzons1M/hHlsgriT1HdGwJvSVRDIsFhCGslooiCIKaNMtPAn9rb3NzE6MNrtKEC8fOoGa41zE5rBlPKkZ7JQfjkv2DkvGk83v7liTV/weeOb3RVramwDv8QjCPEYlAJgKz+iKVoaxsq9XyL219eVJ1Rb0K7J87jyg0tXN4XxccTR3x3CJjiwgNhWrIFSgBMoNi7XXersS/0zt14SKhMsSy5sMIdg9gOIHBGEaHMPrSMPrc8WnS8Olzw3DS8P24RtoaYZfINcrV9C49es+9Nz73twPuvp5x9cmAy48/cuXpDrdeDLj9csCN5wNurv31Z7sn3Hkx5OH2EQ/eBjx8F3Lt1ZRfKNImvNL5SFQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Screen Shot 2565-04-14 at 16.12.50.png\"\n        title=\"Screen Shot 2565-04-14 at 16.12.50.png\"\n        src=\"/static/6bcab8592c3b374437bb3072aef1b041/8c557/Screen_Shot_2565-04-14_at_16.12.50.png\"\n        srcset=\"/static/6bcab8592c3b374437bb3072aef1b041/4edbd/Screen_Shot_2565-04-14_at_16.12.50.png 175w,\n/static/6bcab8592c3b374437bb3072aef1b041/13ae7/Screen_Shot_2565-04-14_at_16.12.50.png 350w,\n/static/6bcab8592c3b374437bb3072aef1b041/8c557/Screen_Shot_2565-04-14_at_16.12.50.png 700w,\n/static/6bcab8592c3b374437bb3072aef1b041/e996b/Screen_Shot_2565-04-14_at_16.12.50.png 1050w,\n/static/6bcab8592c3b374437bb3072aef1b041/2cefc/Screen_Shot_2565-04-14_at_16.12.50.png 1400w,\n/static/6bcab8592c3b374437bb3072aef1b041/d9ed5/Screen_Shot_2565-04-14_at_16.12.50.png 2880w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>Upload Service Principle ไปที่ GitHub Secrets</li>\n<li>จากนั้น Commit ไฟล์ที่ผ่านการ Encrypt แล้ว เช่น <code class=\"language-text\">examples/data.azure-enc.yaml</code> ไปยัง Private Git Repo</li>\n<li>ตั้งค่าให้ GitHub Actions สามารถที่จะ Decrypt secret ที่เราต้องการออกมาได้ จาก Path ที่อยู่ใน yaml file</li>\n</ol>\n<p>ตัวอย่างการใช้งาน</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v3\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> mildronize/actions<span class=\"token punctuation\">-</span>get<span class=\"token punctuation\">-</span>secret<span class=\"token punctuation\">-</span>sops/azure@v1\n    <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> sops\n    <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"azure.enc.yaml\"</span> <span class=\"token comment\"># Encrypted SOPS yaml path</span>\n      <span class=\"token key atrule\">property-path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\".scope_a.app_service.app1\"</span> <span class=\"token comment\"># yq/jq expression syntax for getting a particular value</span>\n      <span class=\"token key atrule\">decrypting-key</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.Azure_Credential <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token comment\"># Azure Service Principle</span>\n      <span class=\"token key atrule\">sops-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3.7.2'</span>\n\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> echo \"$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> steps.sops.outputs.secret <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\"</code></pre></div>\n<blockquote>\n<p>ในการใช้งาน <a href=\"https://github.com/marketplace/actions/get-secrets-from-encrypted-sops\">mildronize/actions-get-secret-sops</a> จะต้องกำหนด <code class=\"language-text\">property-path</code> สำหรับเข้าถึง secret ที่เราต้องการผ่าน path ของ yaml ไฟล์ โดยใช้ syntax ของ <a href=\"https://stedolan.github.io/jq/\">jq</a> หรือ <a href=\"https://github.com/mikefarah/yq\">yq</a> ก็ได้</p>\n</blockquote>\n<h1>4. ตัวอย่างการใช้งานจริง SOPS ด้วย Azure Key Vault และเก็บ Encrypted Secrets บน Private Git repo</h1>\n<p>โค๊ดนี้<a href=\"https://github.com/mildronize/deploy-multiple-azure-app-services-using-github-actions-matrix/blob/main/.github/workflows/build-and-deploy.yml\">ปรับปรุงโค๊ด GitHub Actions เดิม</a> สามารถไปตามการพูดของผมเรื่อง <a href=\"https://github.com/mildronize/deploy-multiple-azure-app-services-using-github-actions-matrix\">“<strong><strong>Deploy .NET Core 6 to Multiple Azure App Services using GitHub Actions Matrix</strong></strong>”</a> เมื่อวันที่ 7 เม.ย. 2565 ที่ผ่านมาได้</p>\n<p>ตัวนี้จะเป็นการ Build .NET Core 6 และ Deploy ไปยัง Azure App Service จำนวน 3 servers พร้อมๆ กันโดยใช้ GitHub Actions และอ่าน Azure Service Principle จาก GitHub Secrets จากนั้น นำไปอ่านค่า SOPS Secrets จากใน Private Repo</p>\n<p>โดยตั้งค่า GitHub Secret Name ดังนี้</p>\n<ul>\n<li><code class=\"language-text\">AzureKeyVault_ServicePrinciple__kv_github_action__sp_sops_github_action</code> เอาไว้เก็บ Service Principal จากหัวข้อที่ผ่านมา</li>\n<li><code class=\"language-text\">GH_TOKEN_PAT</code> เอาไว้เก็บ Personal Access Token สำหรับ Checkout GitHub Private Repo</li>\n</ul>\n<p>และนี่เป็นตัวอย่าง SOPS data เก็บไว้ในไฟล์ <code class=\"language-text\">my-sops.enc.yaml</code> ที่เอาไว้เก็บ Publish Profile ของแต่ละ App Service</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">thadaw</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">app_service</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">cat</span><span class=\"token punctuation\">:</span> Publish Profile of Cat Server from Azure App Service\n    <span class=\"token key atrule\">dog</span><span class=\"token punctuation\">:</span> Publish Profile of Dog Server from Azure App Service\n    <span class=\"token key atrule\">ant</span><span class=\"token punctuation\">:</span> Publish Profile of Ant Server from Azure App Service</code></pre></div>\n<p>GitHub Actions:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Build and Deploy .NET Core\"</span>\n\n<span class=\"token comment\"># Controls when the workflow will run</span>\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># Allows you to run this workflow manually from the Actions tab</span>\n  <span class=\"token key atrule\">workflow_dispatch</span><span class=\"token punctuation\">:</span>\n\n<span class=\"token comment\"># This env is sharing between jobs</span>\n<span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">dotnet_version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'6.0'</span>\n  <span class=\"token key atrule\">artifact_name</span><span class=\"token punctuation\">:</span> web<span class=\"token punctuation\">-</span>api\n  <span class=\"token key atrule\">project_path</span><span class=\"token punctuation\">:</span> src/DemoWebAPI\n\n\t<span class=\"token key atrule\">my_private_repo_secrets_version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"0.0.1\"</span>\n  <span class=\"token key atrule\">sops_service_principle_gh_secret_name</span><span class=\"token punctuation\">:</span> AzureKeyVault_ServicePrinciple__kv_github_action__sp_sops_github_action\n  <span class=\"token key atrule\">sops_secrets_path</span><span class=\"token punctuation\">:</span> ./my<span class=\"token punctuation\">-</span>sops.enc.yaml\n  <span class=\"token key atrule\">sops_version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3.7.2\"</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout Code\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Setup .NET Core\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>dotnet@v1\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">dotnet-version</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> env.dotnet_version <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Publish folder\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          cd \"./${{ env.project_path }}\"\n          dotnet restore\n          dotnet build --configuration Release\n          dotnet publish --configuration Release --output ./output</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Upload artifact for deployment job\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/upload<span class=\"token punctuation\">-</span>artifact@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> env.artifact_name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'${{ env.project_path }}/output'</span>\n          <span class=\"token key atrule\">retention-days</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>  <span class=\"token comment\"># Keep artifact on remote only 1 day</span>\n\n  <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> 🚀 Deploy to $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">needs</span><span class=\"token punctuation\">:</span> build\n    <span class=\"token key atrule\">strategy</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">fail-fast</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n      <span class=\"token key atrule\">matrix</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">include</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> demo_multi_app_cat\n            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> thadaw<span class=\"token punctuation\">-</span>demo<span class=\"token punctuation\">-</span>multi<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">-</span>cat\n            <span class=\"token key atrule\">property_path</span><span class=\"token punctuation\">:</span> .thadaw.app_service.cat\n\n          <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> demo_multi_app_dog\n            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> thadaw<span class=\"token punctuation\">-</span>demo<span class=\"token punctuation\">-</span>multi<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">-</span>dog\n            <span class=\"token key atrule\">property_path</span><span class=\"token punctuation\">:</span> .thadaw.app_service.dog\n\n          <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> demo_multi_app_ant\n            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> thadaw<span class=\"token punctuation\">-</span>demo<span class=\"token punctuation\">-</span>multi<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">-</span>ant\n            <span class=\"token key atrule\">property_path</span><span class=\"token punctuation\">:</span> .thadaw.app_service.ant\n\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Download artifact from build job\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/download<span class=\"token punctuation\">-</span>artifact@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> env.artifact_name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout My Private repo Secrets\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v3\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">repository</span><span class=\"token punctuation\">:</span> mildronize/my<span class=\"token punctuation\">-</span>private<span class=\"token punctuation\">-</span>repo<span class=\"token punctuation\">-</span>secrets\n          <span class=\"token key atrule\">ref</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'${{ env.my_private_repo_secrets_version }}'</span>\n          <span class=\"token key atrule\">token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GH_TOKEN_PAT <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> ./my<span class=\"token punctuation\">-</span>private<span class=\"token punctuation\">-</span>repo<span class=\"token punctuation\">-</span>secrets\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Get Credential from SOPS\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> mildronize/actions<span class=\"token punctuation\">-</span>get<span class=\"token punctuation\">-</span>secret<span class=\"token punctuation\">-</span>sops/azure@v1\n        <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> sops\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"./my-private-repo-secrets/${{ env.sops_secrets_path }}\"</span>\n          <span class=\"token key atrule\">property-path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"${{ matrix.property_path }}\"</span>\n          <span class=\"token key atrule\">decrypting-key</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets<span class=\"token punctuation\">[</span>env.sops_service_principle_gh_secret_name<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">sops-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"${{ env.sops_version }}\"</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy to Azure Web App\n        <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> deploy<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webapp\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> azure/webapps<span class=\"token punctuation\">-</span>deploy@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">app-name</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">publish-profile</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> steps.sops.outputs.secret <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">package</span><span class=\"token punctuation\">:</span> .</code></pre></div>\n<p>ก็จบกันไปแล้วนะคับ ใครมีประเด็นเรื่องใดอยากจะนำเสนอ สามารถพูดคุยกันได้เสมอครับ</p>\n<p>ขอบคุณที่อ่านจนจบ แล้วพบกันใหม่</p>","timeToRead":10,"excerpt":"Talks Info Event: Global Azure Thailand. Demo Repo in Talk SOPS for Azure Key Vault Boilerplate on GitHub…","frontmatter":{"title":"Dealing with more than 100 secrets on GitHub Actions using Mozilla SOPS and Azure Key Vault","date":null,"category":null,"tags":["GitHub Actions","Mozila SOPS","Azure Key Vault"],"unsplashImgCoverId":"NWmcp5fE_4M"},"fields":{"slug":"suzlta6","date":"2022-05-07","readableSlug":"dealing-with-more-than-100-secrets-on-git-hub-actions-using-mozilla-sops-and-azure-key-vault","isDraft":false,"pageview":168,"renderedPathname":"/dealing-with-more-than-100-secrets-on-git-hub-actions-using-mozilla-sops-and-azure-key-vault-suzlta6/","shortPathname":"/s/suzlta6/"}},"allMarkdownRemark":{"edges":[{"node":{"fields":{"renderedPathname":"/how-to-setup-this-blog-we3xr8r/","slug":"we3xr8r"}}},{"node":{"fields":{"renderedPathname":"/simple-soap-client-and-simple-server-via-flask-91bu9k0/","slug":"91bu9k0"}}},{"node":{"fields":{"renderedPathname":"/my-blog-development-for-jekyll-site-hm371bt/","slug":"hm371bt"}}},{"node":{"fields":{"renderedPathname":"/การแทนตัวอักษรภาษาไทยในระบบการเข้ารหัสแบบต่างๆ-928lrr0/","slug":"928lrr0"}}},{"node":{"fields":{"renderedPathname":"/มาอัพเดท-debian-จากเวอร์ชั่น-stable-มาเป็น-sid-กันเถอะ-e52fdze/","slug":"e52fdze"}}},{"node":{"fields":{"renderedPathname":"/how-to-upgrade-debian-to-sid-l0ywmex/","slug":"l0ywmex"}}},{"node":{"fields":{"renderedPathname":"/git-hub-page-build-failure-solution-lo3mz9g/","slug":"lo3mz9g"}}},{"node":{"fields":{"renderedPathname":"/วิธีการติดตั้ง-google-chrome-บน-debian-uckstjz/","slug":"uckstjz"}}},{"node":{"fields":{"renderedPathname":"/how-to-install-google-chrome-on-debian-lay4u9o/","slug":"lay4u9o"}}},{"node":{"fields":{"renderedPathname":"/เวอร์ชั่นแต่ละเวอร์ชั่นของ-debian-คืออะไร-อะไรคือ-sid-testing-stable-โอ๊ยเยอะแยะไปหมด-612v702/","slug":"612v702"}}},{"node":{"fields":{"renderedPathname":"/มือใหม่หัดใช้ลินุกซ์ครั้งแรก-it3xlde/","slug":"it3xlde"}}},{"node":{"fields":{"renderedPathname":"/วิธีการทำให้-gnome-nautilus-แสดง-directory-ก่อนไฟล์-8q0uj3s/","slug":"8q0uj3s"}}},{"node":{"fields":{"renderedPathname":"/how-to-compile-install-gnome-builder-on-debian-1jxvb3m/","slug":"1jxvb3m"}}},{"node":{"fields":{"renderedPathname":"/how-to-use-vim-with-clipboard-on-debian-rfih9o0/","slug":"rfih9o0"}}},{"node":{"fields":{"renderedPathname":"/ทริคการใช้-git-การ-merge-บางไฟล์ไปอีก-branch-2zgi1pu/","slug":"2zgi1pu"}}},{"node":{"fields":{"renderedPathname":"/วิธีการตั้งค่า-vpn-ของม-สงขลานครินทร์-psu-ix43nzw/","slug":"ix43nzw"}}},{"node":{"fields":{"renderedPathname":"/guideline-for-upgrading-jekyll-from-2-x-to-3-x-z578nvw/","slug":"z578nvw"}}},{"node":{"fields":{"renderedPathname":"/วิธีติดตั้งเกม-hearthstone-heroes-of-warcraft-บน-debian-2vpnolt/","slug":"2vpnolt"}}},{"node":{"fields":{"renderedPathname":"/เปิด-hotspot-wi-fi-เองโดยที่ต้องไม่พึ่งโปรแกรมใดๆ-บน-windows-4hztzdg/","slug":"4hztzdg"}}},{"node":{"fields":{"renderedPathname":"/awesome-หนึ่งในคำสำคัญ-keyword-ที่โปรแกรมเมอร์ทุกคนควรจะรู้จักไว้-utkfndt/","slug":"utkfndt"}}},{"node":{"fields":{"renderedPathname":"/titlesec-latex-package-doesnt-create-section-numbers-on-version-2-10-1-ptkagjo/","slug":"ptkagjo"}}},{"node":{"fields":{"renderedPathname":"/a-very-short-ubuntu-debian-packages-installation-sheet-0967oym/","slug":"0967oym"}}},{"node":{"fields":{"renderedPathname":"/การเดินทางของ-xiaomi-mi-2-s-และแนวทางแก้ปัญหาเซนเซอร์แนบหู-proximity-sensor-ไม่ทำงาน-92rs1lc/","slug":"92rs1lc"}}},{"node":{"fields":{"renderedPathname":"/เขียนบล็อกด้วยภาษา-markdown-ด้วยแอพจดโน๊ต-bear-บน-i-os-nbqw9e1/","slug":"nbqw9e1"}}},{"node":{"fields":{"renderedPathname":"/ทำไมเราถึงควรใช้ฐานข้อมูลอนุกรมเวลาสำหรับ-ข้อมูลอนุกรมเวลา-time-series-database-et0zg84/","slug":"et0zg84"}}},{"node":{"fields":{"renderedPathname":"/รู้จักกับฐานข้อมูลอนุกรมเวลา-open-tsdb-กันเถอะ-jmm9qn9/","slug":"jmm9qn9"}}},{"node":{"fields":{"renderedPathname":"/วิธีตั้งค่าการใช้งาน-github-แบบไม่ต้องกรอกรหัสผ่านทุกครั้ง-ผ่าน-ssh-บน-windows-mo4feik/","slug":"mo4feik"}}},{"node":{"fields":{"renderedPathname":"/promise-async-await-ของ-js-es-6-ฉบับสั้นๆ-ไม่พูดเยอะ-เจ็บคอ-แถม-rx-js-leu0374/","slug":"leu0374"}}},{"node":{"fields":{"renderedPathname":"/getting-started-tdd-in-30-seconds-with-python-lm28n32/","slug":"lm28n32"}}},{"node":{"fields":{"renderedPathname":"/ได้-99-คะแนนจาก-google-insights-เรียนรู้การทำ-web-optimization-i4kssit/","slug":"i4kssit"}}},{"node":{"fields":{"renderedPathname":"/สิ่งที่ได้รับจากการเรียนวิศวกรรมคอมพิวเตอร์ปริญญาโท-9tdymnn/","slug":"9tdymnn"}}},{"node":{"fields":{"renderedPathname":"/amazing-ui-design-articles-14liwiu/","slug":"14liwiu"}}},{"node":{"fields":{"renderedPathname":"/react-design-patterns-ho462dz/","slug":"ho462dz"}}},{"node":{"fields":{"renderedPathname":"/ย้ายจาก-react-class-component-มาเป็น-functional-component-ง่ายกว่าที่คิด-a7ng95o/","slug":"a7ng95o"}}},{"node":{"fields":{"renderedPathname":"/จัดการ-side-effects-ใน-react-ด้วย-hook-use-effect-wes5jlp/","slug":"wes5jlp"}}},{"node":{"fields":{"renderedPathname":"/react-import-export-component-pattern-whaab42/","slug":"whaab42"}}},{"node":{"fields":{"renderedPathname":"/run-c-scripts-ไฟล์เดียว-โดยใช้-net-cli-t2z614m/","slug":"t2z614m"}}},{"node":{"fields":{"renderedPathname":"/ชีวิตดีเมื่อใช้-fluent-assertions-ช่วยในเขียน-test-เพื่อเปรียบเทียบ-object-ที่ซับซ้อน-qlh6tbh/","slug":"qlh6tbh"}}},{"node":{"fields":{"renderedPathname":"/type-script-4-9-มาใช้-satisfies-เพื่อทำให้-type-ถูกต้องมากขึ้นกันเถอะ-7vzlyj3/","slug":"7vzlyj3"}}},{"node":{"fields":{"renderedPathname":"/responsive-expanding-search-bar-cnhkvv7/","slug":"cnhkvv7"}}},{"node":{"fields":{"renderedPathname":"/ปัญหาการพิมพ์ภาษาไทยบน-atom-editor-5zqwlzs/","slug":"5zqwlzs"}}},{"node":{"fields":{"renderedPathname":"/mildy-my-debian-customization-gtg6emr/","slug":"gtg6emr"}}},{"node":{"fields":{"renderedPathname":"/ทำไม-mount-volume-ของ-docker-บน-windows-แล้วมองไม่เห็นไฟล์-deb407s/","slug":"deb407s"}}},{"node":{"fields":{"renderedPathname":"/ใช้งานภาษาไทยบน-xe-la-te-x-ฉบับรีบร้อน-1esbgon/","slug":"1esbgon"}}},{"node":{"fields":{"renderedPathname":"/วิธีการเริ่มการทำงาน-vm-ของ-virtual-box-แบบทำงานเบื้องหลัง-5v44hmt/","slug":"5v44hmt"}}},{"node":{"fields":{"renderedPathname":"/การเขียนงานวิจัยประชุมวิชาการครั้งแรก-4hfvb6r/","slug":"4hfvb6r"}}},{"node":{"fields":{"renderedPathname":"/อยากแชร์-เรื่องหลังจาการตัดสินใจ-ทำไมถึงใช้เวลาทำวิจัยป-โท-แค่-7-เดือน-x6nfc7a/","slug":"x6nfc7a"}}},{"node":{"fields":{"renderedPathname":"/วิธีการรัน-java-script-ข้างนอก-bundle-ของ-webpack-และการเรียกใช้-j-query-ภายใน-webpack-2kbbdkt/","slug":"2kbbdkt"}}},{"node":{"fields":{"renderedPathname":"/ทำ-task-management-ด้วย-template-my-things-fully-inspired-by-things-3-application-p8c504z/","slug":"p8c504z"}}},{"node":{"fields":{"renderedPathname":"/มาเขียน-notion-formula-with-confidence-ด้วย-tdd-กัน-แจก-formula-thousand-comma-ด้วยนะ-fk36d30/","slug":"fk36d30"}}},{"node":{"fields":{"renderedPathname":"/เราควรเพิ่มประสิทธิภาพของ-single-page-application-โดยใช้-server-side-rendering-ssr-หรือไม่-8jexlus/","slug":"8jexlus"}}},{"node":{"fields":{"renderedPathname":"/ตั้งค่าให้-github-actions-แสดง-previews-deploy-เมื่อส่ง-pull-request-โดยใช้-vercel-qocjeqb/","slug":"qocjeqb"}}},{"node":{"fields":{"renderedPathname":"/วิธีการตั้งค่า-ssh-สำหรับ-git-hub-เพื่อให้จำรหัสผ่านบน-windows-wsl-mac-os-และ-ubuntu-hzpnrnx/","slug":"hzpnrnx"}}},{"node":{"fields":{"renderedPathname":"/การใช้งาน-multi-modules-ต่อ-workspace-ใน-vs-codeและ-วิธีการแก้ปัญหา-you-are-outside-of-a-module-and-outside-of-gopath-src-0ydbrqj/","slug":"0ydbrqj"}}},{"node":{"fields":{"renderedPathname":"/dealing-with-more-than-100-secrets-on-git-hub-actions-using-mozilla-sops-and-azure-key-vault-suzlta6/","slug":"suzlta6"}}},{"node":{"fields":{"renderedPathname":"/ลดขนาด-docker-image-ของ-nest-js-prisma-กับ-nx-monorepo-ประมาณ-97-ด้วย-esbuild-bundle-c2tcmvl/","slug":"c2tcmvl"}}},{"node":{"fields":{"renderedPathname":"/draft/react-best-practices-checklist-bulndnf/","slug":"bulndnf"}}},{"node":{"fields":{"renderedPathname":"/draft/react-dark-mode-yvtxh9c/","slug":"yvtxh9c"}}},{"node":{"fields":{"renderedPathname":"/draft/react-stylesheet-p72tqcd/","slug":"p72tqcd"}}},{"node":{"fields":{"renderedPathname":"/draft/git-cookbook-4vwhqae/","slug":"4vwhqae"}}},{"node":{"fields":{"renderedPathname":"/draft/git-in-action-obu52c9/","slug":"obu52c9"}}},{"node":{"fields":{"renderedPathname":"/draft/security-ubtbao5/","slug":"ubtbao5"}}},{"node":{"fields":{"renderedPathname":"/draft/webpack-multiple-entry-points-j5trzrh/","slug":"j5trzrh"}}},{"node":{"fields":{"renderedPathname":"/draft/gatsby-with-google-analytics-l8cwdzj/","slug":"l8cwdzj"}}},{"node":{"fields":{"renderedPathname":"/draft/ปี-2021-แล้ว-redux-ยังน่าใช้อยู่มั้ย-sn99eu2/","slug":"sn99eu2"}}},{"node":{"fields":{"renderedPathname":"/draft/ปี-2021-แล้ว-boostrap-ยังน่าใช้อยู่มั้ย-r6lb1z1/","slug":"r6lb1z1"}}},{"node":{"fields":{"renderedPathname":"/draft/setup-type-script-hal2uva/","slug":"hal2uva"}}},{"node":{"fields":{"renderedPathname":"/draft/type-script-6ecucle/","slug":"6ecucle"}}},{"node":{"fields":{"renderedPathname":"/draft/มาดูกันว่ามีอะไรบ้างที่ทำให้การเขียน-css-ง่ายขึ้น-เอ๊ะ-หรือยากขึ้น-7sza35r/","slug":"7sza35r"}}},{"node":{"fields":{"renderedPathname":"/draft/react-xo7nmlr/","slug":"xo7nmlr"}}},{"node":{"fields":{"renderedPathname":"/draft/read-private-key-from-env-file-zmpgpk8/","slug":"zmpgpk8"}}},{"node":{"fields":{"renderedPathname":"/draft/shortcut-css-in-js-responsive-ne5q3pt/","slug":"ne5q3pt"}}},{"node":{"fields":{"renderedPathname":"/draft/styled-component-type-script-w5y3zzn/","slug":"w5y3zzn"}}},{"node":{"fields":{"renderedPathname":"/draft/c-type-script-cheat-sheet-7y0e9i6/","slug":"7y0e9i6"}}},{"node":{"fields":{"renderedPathname":"/draft/dependency-injection-in-asp-net-core-kxkqrql/","slug":"kxkqrql"}}},{"node":{"fields":{"renderedPathname":"/draft/introduction-to-type-script-abfn33i/","slug":"abfn33i"}}},{"node":{"fields":{"renderedPathname":"/draft/modern-javascript-es-6-ใน-react-ที่พบได้บ่อย-แถม-type-script-g4owyyw/","slug":"g4owyyw"}}},{"node":{"fields":{"renderedPathname":"/draft/offsetting-an-html-anchor-to-adjust-for-fixed-header-lygyofl/","slug":"lygyofl"}}},{"node":{"fields":{"renderedPathname":"/draft/node-js-esm-218xi1n/","slug":"218xi1n"}}},{"node":{"fields":{"renderedPathname":"/draft/type-script-สำหรับ-everyday-uses-68zrdlq/","slug":"68zrdlq"}}},{"node":{"fields":{"renderedPathname":"/draft/uptime-kuma-on-azure-virtual-machine-h4uaaip/","slug":"h4uaaip"}}},{"node":{"fields":{"renderedPathname":"/draft/how-to-choose-proper-component-ui-react-55dtwqq/","slug":"55dtwqq"}}},{"node":{"fields":{"renderedPathname":"/draft/gatsby-thai-font-sharing-social-p96v4ze/","slug":"p96v4ze"}}},{"node":{"fields":{"renderedPathname":"/draft/jimp-load-font-function-renders-non-english-thai-font-ugly-with-vowel-character-k9xf79y/","slug":"k9xf79y"}}},{"node":{"fields":{"renderedPathname":"/draft/get-page-view-from-google-analytics-by-page-path-bqfiofl/","slug":"bqfiofl"}}},{"node":{"fields":{"renderedPathname":"/draft/บันทึก-seo-และ-social-media-e6zs48e/","slug":"e6zs48e"}}},{"node":{"fields":{"renderedPathname":"/draft/วิธีการ-build-asp-net-framework-และ-deploy-ไปยัง-azure-app-service-g3k2o1b/","slug":"g3k2o1b"}}},{"node":{"fields":{"renderedPathname":"/draft/introduction-to-git-hub-action-l2kc44e/","slug":"l2kc44e"}}},{"node":{"fields":{"renderedPathname":"/draft/ทำไมเราควรติด-type-ภาษา-java-script-ด้วย-type-script-3s569jw/","slug":"3s569jw"}}},{"node":{"fields":{"renderedPathname":"/draft/how-to-debug-a-node-js-application-in-visual-studio-code-java-script-debugging-ulguf3h/","slug":"ulguf3h"}}},{"node":{"fields":{"renderedPathname":"/draft/นำพาโปรเจ็ค-asp-net-แบบ-web-site-project-อายุร่วม-8-ปี-เข้าสู่ยุค-automate-build-ด้วย-git-hub-actions-qdz8lz2/","slug":"qdz8lz2"}}},{"node":{"fields":{"renderedPathname":"/draft/site-reliability-engineering-d070sbs/","slug":"d070sbs"}}},{"node":{"fields":{"renderedPathname":"/draft/deploy-multiple-azure-app-services-using-git-hub-actions-matrix-tjd75q6/","slug":"tjd75q6"}}},{"node":{"fields":{"renderedPathname":"/draft/3-เรื่อง-ที่ควรทำหลังติดตั้ง-wsl-บน-windows-เพื่อทำให้การใช้งานร่วมกับ-vs-code-สะดวกมากขึ้น-h3kmk3n/","slug":"h3kmk3n"}}},{"node":{"fields":{"renderedPathname":"/draft/how-to-hide-github-action-secrets-kauwjer/","slug":"kauwjer"}}},{"node":{"fields":{"renderedPathname":"/draft/provider-azurerm-version-3-ออกมาแล้ว-มีอะไรเปลี่ยนไปบ้าง-มีอะไรที่-deprecated-9ahhltg/","slug":"9ahhltg"}}},{"node":{"fields":{"renderedPathname":"/draft/unintended-circular-dependency-of-dependency-injection-using-type-script-uxzmr8c/","slug":"uxzmr8c"}}},{"node":{"fields":{"renderedPathname":"/draft/วิธี-backup-database-และเตรียม-migration-script-บน-sql-server-ด้วย-command-line-h10x942/","slug":"h10x942"}}},{"node":{"fields":{"renderedPathname":"/draft/type-script-object-mapping-7rwsbzv/","slug":"7rwsbzv"}}},{"node":{"fields":{"renderedPathname":"/draft/dotnet-6-env-noqcy49/","slug":"noqcy49"}}}]}},"pageContext":{"slug":"suzlta6","nexttitle":"ลดขนาด Docker Image ของ NestJS/Prisma กับ Nx Monorepo ประมาณ 97% ด้วย esbuild Bundle","nextslug":"c2tcmvl","prevtitle":"การใช้งาน Multi-Modules ต่อ Workspace ใน VS Codeและ วิธีการแก้ปัญหา You are outside of a module and outside of $GOPATH/src","prevslug":"0ydbrqj"}},"staticQueryHashes":[]}